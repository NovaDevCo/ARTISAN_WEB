{% extends "base.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='blog_list.css') }}" />
{% endblock %}

{% block title %}All Blog Posts{% endblock %}

{% block content %}
<div class="container">
    <h2>Community Blog Feed</h2>

    <div class="blog-feed">
        {% for post in posts %}
            <div class="card">
                <div class="card-body">
                    <!-- Blog Title -->
                    <h4>{{ post.title }}</h4>

                    <!-- Blog Description -->
                    <p>{{ post.description }}</p>

                    <!-- Media (Image or Video) -->
                    {% if post.media_url %}
                        {% if post.media_url.endswith(('.jpg', '.jpeg', '.png', '.gif')) %}
                            <img src="{{ url_for('static', filename=post.media_url) }}" class="blog-media"/>
                        {% elif post.media_url.endswith(('.mp4', '.mov', '.avi', '.webm')) %}
                            <video controls class="blog-media">
                                <source src="{{ url_for('static', filename=post.media_url) }}">
                                Your browser does not support the video tag.
                            </video>
                        {% endif %}
                    {% endif %}

                    <!-- Meta Info -->
                    <small>
                        Posted by <strong>{{ post.user.username }}</strong> 
                        on {{ post.created_at.strftime('%Y-%m-%d %H:%M') }}
                    </small>
                </div>
            </div>
        {% else %}
            <p>No blog posts yet.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
