{% extends "base.html" %}

{% block extra_css %}
  <link rel="stylesheet" href="{{ url_for('static', filename='order_details.css') }}" />
{% endblock %}

{% block content %}
<div class="order-page">
  <div class="order-header">
    <h3>Order #{{ order.id }}</h3>
    <div class="status-tracker">
      <span class="status-dot {{ order.status|lower }}"></span>
      <span class="status-label">{{ order.status }}</span>
    </div>
    <p class="order-location">
      ğŸ“ {{ order.location.strip() if order.location.strip() else "Not specified" }}
    </p>
  </div>

  <ul class="order-items">
    {% for order_item in order.order_items %}
      <li>
        <div class="item-row">
          <strong>{{ order_item.item.name }}</strong>
          <span class="item-qty">x{{ order_item.quantity }}</span>
        </div>
        <div class="item-price">â‚±{{ "%.2f"|format(order_item.price) }}</div>
        <small>Current stock: {{ order_item.item.stock }}</small>
      </li>
    {% endfor %}
  </ul>

  <div class="order-actions">
    {% if order.status == 'shipped' %}
      <form method="POST" action="{{ url_for('views.receive_order_user', order_id=order.id) }}">
        <button class="btn-action">âœ… Mark as Received</button>
      </form>
    {% elif order.status == 'received' %}
      <a href="{{ url_for('views.rate_shop_user', shop_id=order.shop_id) }}" class="btn-action">â­ Rate Shop</a>
    {% endif %}
  </div>
</div>
{% endblock %}



